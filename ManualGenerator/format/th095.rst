.. _Th095Formats:

東方文花帖用
============

.. _T95SCR:

スコア一覧
----------

:書式: ``%T95SCR[x][y][z]``

    :``[x]``: レベル

        :``[1～9]``: Level 1～9
        :``[0]``:    Level 10
        :``[X]``:    Level EX

    :``[y]``: シーン

        :``[1～9]``: 1～9

    :``[z]``: 項目

        :``[1]``: ハイスコア
        :``[2]``: 登録してあるベストショットのスコア
        :``[3]``: 撮影枚数
        :``[4]``: 処理落ち率

:例:
    | ``%T95SCR111`` ... 1-1 でのハイスコア
    | ``%T95SCR233`` ... 2-3 での撮影枚数

:補足:
    - 存在しないレベルとシーンの組み合わせ（1-7 など）は無視されます。

:相違点:
    - 処理落ち率は小数点以下第 3 位まで（% 記号付きで）出力されます。
      今後、 この桁数を設定可能にするかも知れません。

.. _T95SCRTL:

スコア合計
----------

:書式: ``%T95SCRTL[x]``

    :``[x]``: 項目

        :``[1]``: 撮影総合評価点
        :``[2]``: 登録してあるベストショットのスコアの合計
        :``[3]``: 総撮影枚数
        :``[4]``: 撮影に成功したシーン数の合計

:例:
    | ``%T95SCRTL1`` ... 撮影総合評価点
    | ``%T95SCRTL3`` ... 総撮影枚数

.. _T95CARD:

被写体 & スペルカード情報
-------------------------

:書式: ``%T95CARD[x][y][z]``

    :``[x]``: レベル

        :``[1～9]``: Level 1～9
        :``[0]``:    Level 10
        :``[X]``:    Level EX

    :``[y]``: シーン

        :``[1～9]``: 1～9

    :``[z]``: 項目

        :``[1]``: 被写体の名前
        :``[2]``: スペルカード名
:例:
    | ``%T95CARD111`` ... 1-1 の被写体の名前
    | ``%T95CARD232`` ... 2-3 のスペルカード名

:補足:
    - 存在しないレベルとシーンの組み合わせ（1-7 など）は無視されます。

:相違点:
    - :ref:`未挑戦のスペルカード名を出力しない <howtouse>` 設定にしている場合、
      該当するものは被写体の名前・スペルカード名ともに ``?????``
      のように出力されます。 （一応ネタバレ防止のため。）

.. _T95SHOT:

ベストショット出力
------------------

:書式: ``%T95SHOT[x][y]``

    :``[x]``: レベル

        :``[1～9]``: Level 1～9
        :``[0]``:    Level 10
        :``[X]``:    Level EX

    :``[y]``: シーン

        :``[1～9]``: 1～9

:例:
    | ``%T95SHOT12`` ... 1-2 のベストショット

:補足:
    - 存在しないレベルとシーンの組み合わせ（1-7 など）は無視されます。
    - | このテンプレート書式は
        ``<img src="./bestshot/bs_01_1.png" alt="～" title="～" border=0>``
        のような HTML の IMG タグに置換されます。
      | 同時に、 対象となるベストショットファイル (bs\_??\_?.dat) を PNG
        形式に変換した画像ファイルが出力されます。
    - IMG タグの alt 属性と title 属性には、
      ベストショット撮影時のスコアと処理落ち率、
      及びスペルカード名が出力されます。
    - 画像ファイルは、 :guilabel:`出力先(&O)` 欄で指定されたフォルダ内の
      :guilabel:`画像出力先(&I)` 欄で指定されたフォルダに出力されます。
    - ベストショットファイルが存在しない場合、 IMG
      タグや画像ファイルは出力されません。

:相違点:
    - 本ツールでは、 ベストショットファイルから PNG
      形式への変換を自前で行います。 そのため Susie プラグインは不要です。
    - 自前で変換する都合上、 東方文花帖 ver. 1.02a
      以外で撮影されたベストショットファイルの変換には非対応です。
      対応予定も今のところありません。
    - ベストショットファイルの変換は、
      このテンプレート書式がテンプレートファイル内に無くても実行されます。
    - 画像ファイルの出力先フォルダが存在しない場合、
      本ツールが自動で作成します。

.. _T95SHOTEX:

ベストショット出力（詳細版）
----------------------------

.. highlight:: html

:書式: ``%T95SHOTEX[x][y][z]``

    :``[x]``: レベル

        :``[1～9]``: Level 1～9
        :``[0]``:    Level 10
        :``[X]``:    Level EX

    :``[y]``: シーン

        :``[1～9]``: 1～9

    :``[z]``: 項目

        :``[1]``: 画像ファイルへの相対パス
        :``[2]``: 画像ファイルの幅 (px)
        :``[3]``: 画像ファイルの高さ (px)
        :``[4]``: ベストショット撮影時のスコア
        :``[5]``: ベストショット撮影時の処理落ち率
        :``[6]``: ベストショット撮影日時

:例:
    | ``%T95SHOTEX121`` ... 1-2 の画像ファイルへの相対パス
    | ``%T95SHOTEX236`` ... 2-3 のベストショット撮影日時

:補足:
    - 存在しないレベルとシーンの組み合わせ（1-7 など）は無視されます。
    - このテンプレート書式を使って、 例えば ``%T95SHOT12``
      と同等の出力結果を得るには、
      テンプレートファイルに以下の通りに記載します: ::

        <img src="%T95SHOTEX121" alt="Score: %T95SHOTEX124
        Slow: %T95SHOTEX125
        SpellName: %T95CARD122" title="Score: %T95SHOTEX124
        Slow: %T95SHOTEX125
        SpellName: %T95CARD122" border=0>

:相違点:
    - | このテンプレート書式は本ツール独自のものです。
      | :ref:`T95SHOT` により出力される IMG タグが気に食わなかったから、
        この書式を新規追加し、
        かつベストショットファイルの変換を自前で実装したようなものです。
